{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="{% static 'navbox.css' %}">
    <style>
        body {
            font-family: "Uncut Sans Medium", sans-serif;
        }

        .main-side {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            width: 100%;
            gap:50px;
        }

        .side-info {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            width: 50%;
            align-items: center;
        }

        .plus-minus-info {
           
            width: 450px;
        }

        .plus-minus-info .infoBox{
            width: 100%;
            padding: 8px;
            border-top: 1px solid black;
        }
        .plus-minus-btn{
            font-size: 20px;
            padding-right: 10px;
        }

    

        .main-image {
            width: 100%;
            max-width: 600px;
            position: relative;
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
        }

        .product-image {
            width: 100%;
            max-width: 400px;
            aspect-ratio: 4 / 5;
            height: auto;
            border-radius: 10px;
            object-fit: cover;
            object-position: center;
        }
        .productName{
            font-size: large;
            font-weight: bold;
        }
        /* Size Selector Container */
.size-selector {
    display: flex;
    gap: 10px;
    padding: 10px;
    justify-content: center;
    align-items: center;
}

/* Size Option Button */
.size-option {
    width: 50px;
    height: 25px;
    background-color: #f0f0f0;
    color: #333;
    font-family: "Uncut Sans Medium", sans-serif;
    font-size: 16px;
    border: 2px solid #ccc;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
}
#checkout-btn{
    background-color: green;
    color: white;
    width: 200px;
    padding: 10px;
    border: none;
    font-size: medium;
}

/* Hover Effect */
.size-option:hover {
    background-color: #000;
    color: #fff;
    border-color: #000;
}
/* Hide the default number input controls */
.no-arrows::-webkit-inner-spin-button,
.no-arrows::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

.no-arrows {
    -moz-appearance: textfield; /* For Firefox */
    text-align: center;
    width: 40px;
}

/* Active/Selected State */
.size-option.active {
    background-color: black;
    color: #fff;
    border-color: black;
}

#addToCart{
    border: 1px solid black; 
    padding: 10px;
    width: 200px;
    text-align: center;
    cursor: pointer;
}
#addToCart:hover{
    background-color: #000;
    color: #fff;
    
}
#cart-icon{
    cursor: pointer;
}
#cart-overlay {
    position: fixed;
    top: 0;
    right: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    display: none;
    justify-content: flex-end;
    z-index: 1000;
}

/* Cart Menu */
#cart-menu {
    width: 500px;
    height: 100%;
    background-color: #fff;
    box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
    transform: translateX(100%);
    transition: transform 0.3s ease;
    padding: 20px;
    opacity: 1;
    box-sizing: border-box;
    overflow-y: scroll;
}

/* Active State */
#cart-overlay.show {
    display: flex;
}

#cart-menu.show {
    transform: translateX(0);
}

/* Close Button */
#close-cart {
   
    color: #fff;
    border: none;
    cursor: pointer;
  
}

/* Quantity Box Container */
.quantity-box {
    display: flex;
    align-items: center;
    gap: 5px;
}

/* Input Number Box */
.quantity-input {
    width: 60px;
    height: 40px;
    text-align: center;
    font-size: 16px;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-family: "Uncut Sans Medium", sans-serif;
}

/* Custom Buttons */
.decrease-btn,
.increase-btn {
    width: 40px;
    height: 40px;
    background-color: #000;
    color: #fff;
    border: none;
    border-radius: 5px;
    font-size: 20px;
    cursor: pointer;
    transition: background-color 0.3s;
}

/* Hover Effect */
.decrease-btn:hover,
.increase-btn:hover {
    background-color: #333;
}

/* Remove Default Number Input Arrows */
.no-arrows::-webkit-inner-spin-button,
.no-arrows::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

.no-arrows {
    -moz-appearance: textfield;
}
.contentBox{
    display: none;
}
/* Responsive */
@media (max-width: 600px) {
    .size-option {
        width: 40px;
        height: 40px;
        font-size: 14px;
    }
    #cart-menu{
        width: 100%;
    }
}


        @media screen and (max-width: 810px) {
            .main-side {
                flex-direction: column;
            }

            .side-info {
                width: 100%;
            }

            .product-image {
                max-width: 300px;
                width: 90%;
            }

            .plus-minus-info {
                width: 94%;
            }
        }
    </style>
</head>

<body>
    <div class="nav-box">
        <div style="cursor: pointer;">
                        <span onclick="openMenu()">
                            <svg width="35px" height="35px" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6 8.1H19V6.9H6V8.1ZM6 18.1H19V16.9H6V18.1ZM6 13.1H19V11.9H6V13.1Z" fill="#121923"></path>
                            </svg>
                        </span>
        </div>
        <div class="img-box">
            <img src="{% static 'img/logo_outline2.svg' %}" style="padding: 0px 10px;" alt="">
        </div>
        <div class="left-box" id="cart-icon">
            <span >
                <svg fill="#000000" width="35px" height="35px" viewBox="0 0 256 256" id="Flat"
                    xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M216,68H171.81006a43.99152,43.99152,0,0,0-87.62012,0H40A12.01312,12.01312,0,0,0,28,80V208a12.01312,12.01312,0,0,0,12,12H216a12.01312,12.01312,0,0,0,12-12V80A12.01312,12.01312,0,0,0,216,68ZM128,36a36.04775,36.04775,0,0,1,35.77246,32H92.22754A36.04775,36.04775,0,0,1,128,36Zm92,172a4.004,4.004,0,0,1-4,4H40a4.004,4.004,0,0,1-4-4V80a4.004,4.004,0,0,1,4-4H84v28a4,4,0,0,0,8,0V76h72v28a4,4,0,0,0,8,0V76h44a4.004,4.004,0,0,1,4,4Z">
                    </path>
                </svg>
            </span>
        </div>
    </div>
<!-- menu overlay -->
<div id="menu-overlay">
    <div id="menu-slider">
        <div class="menu-header">
            <h2>Menu</h2>
           
            <svg style="cursor: pointer;" id="close-menu" width="30px" height="30px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M7 17L16.9 7.1" stroke="#000" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M7 7L16.9 16.9" stroke="#000" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </div>
        <ul id="menu-items">
            <li><a href="{% url 'homePage' %}">Home</a></li>
            <li><a href="{% url 'store' %}">Store</a></li>
            <li><a href="{% url 'contact' %}">Contact</a></li>
            <li><a href="{% url 'lookbook' %}">Lookbook</a></li>
          
        </ul>
        <div id="menu-footer">
            <a href="https://www.instagram.com/gullyboysclan/" target="_blank" class="social-icon">
    <svg width="35px" height="35px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000">
        <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
        <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
        <g id="SVGRepo_iconCarrier">
            <title>instagram [#167]</title>
            <desc>Created with Sketch.</desc>
            <defs> </defs>
            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g id="Dribbble-Light-Preview" transform="translate(-340.000000, -7439.000000)" fill="#000000">
                    <g id="icons" transform="translate(56.000000, 160.000000)">
                        <path
                            d="M289.869652,7279.12273 C288.241769,7279.19618 286.830805,7279.5942 285.691486,7280.72871 C284.548187,7281.86918 284.155147,7283.28558 284.081514,7284.89653 C284.035742,7285.90201 283.768077,7293.49818 284.544207,7295.49028 C285.067597,7296.83422 286.098457,7297.86749 287.454694,7298.39256 C288.087538,7298.63872 288.809936,7298.80547 289.869652,7298.85411 C298.730467,7299.25511 302.015089,7299.03674 303.400182,7295.49028 C303.645956,7294.859 303.815113,7294.1374 303.86188,7293.08031 C304.26686,7284.19677 303.796207,7282.27117 302.251908,7280.72871 C301.027016,7279.50685 299.5862,7278.67508 289.869652,7279.12273 M289.951245,7297.06748 C288.981083,7297.0238 288.454707,7296.86201 288.103459,7296.72603 C287.219865,7296.3826 286.556174,7295.72155 286.214876,7294.84312 C285.623823,7293.32944 285.819846,7286.14023 285.872583,7284.97693 C285.924325,7283.83745 286.155174,7282.79624 286.959165,7281.99226 C287.954203,7280.99968 289.239792,7280.51332 297.993144,7280.90837 C299.135448,7280.95998 300.179243,7281.19026 300.985224,7281.99226 C301.980262,7282.98483 302.473801,7284.28014 302.071806,7292.99991 C302.028024,7293.96767 301.865833,7294.49274 301.729513,7294.84312 C300.829003,7297.15085 298.757333,7297.47145 289.951245,7297.06748 M298.089663,7283.68956 C298.089663,7284.34665 298.623998,7284.88065 299.283709,7284.88065 C299.943419,7284.88065 300.47875,7284.34665 300.47875,7283.68956 C300.47875,7283.03248 299.943419,7282.49847 299.283709,7282.49847 C298.623998,7282.49847 298.089663,7283.03248 298.089663,7283.68956 M288.862673,7288.98792 C288.862673,7291.80286 291.150266,7294.08479 293.972194,7294.08479 C296.794123,7294.08479 299.081716,7291.80286 299.081716,7288.98792 C299.081716,7286.17298 296.794123,7283.89205 293.972194,7283.89205 C291.150266,7283.89205 288.862673,7286.17298 288.862673,7288.98792 M290.655732,7288.98792 C290.655732,7287.16159 292.140329,7285.67967 293.972194,7285.67967 C295.80406,7285.67967 297.288657,7287.16159 297.288657,7288.98792 C297.288657,7290.81525 295.80406,7292.29716 293.972194,7292.29716 C292.140329,7292.29716 290.655732,7290.81525 290.655732,7288.98792"
                            id="instagram-[#167]"> </path>
                    </g>
                </g>
            </g>
        </g>
    </svg>
            </a>
       
        </div>
    </div>
</div>

<!-- Cart Overlay -->
<div id="cart-overlay" >
    <div id="cart-menu">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2>Your Cart</h2>
            
            <svg  id="close-cart" style="cursor: pointer;" id="close-menu" width="30px" height="30px" viewBox="0 0 24 24" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <path d="M7 17L16.9 7.1" stroke="#000" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M7 7L16.9 16.9" stroke="#000" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
        </div>
        <div id="cart-items">
            <!-- Dynamic cart items will be inserted here -->
        </div>
        <div id="cart-footer" >
            <div id="total-price" style="color: green;">Total: GHS 0.00</div>
            <div style="display: flex; justify-content: center; margin-top: 20px;">
                <a href="{% url 'checkout' %}">
                    <button id="checkout-btn" style="cursor: pointer;">Checkout</button>
                </a>
            </div>
        </div>
    </div>
</div>

    <div class="productDetailBox" style="margin-top: 80px;">
        <div class="main-side">
            <div class="MainImage">
                <img src="{{product.image.url}}" alt="{{product.name}}" class="product-image">
            </div>
            <div class="side-info">
                <div>
                    <div class="productName">{{product.name}}</div>
                    <div id="productPrice" style="text-align: center; font-size: medium; font-weight: bold;">GHS{{product.price}}</div>
                  
                </div>

                <div class="plus-minus-info">
                    <div class="infoBox">
                      <div style="display: flex; align-items: center;"><span class="plus-minus-btn">+</span><span>Details</span></div>
                            <div class="contentBox">
                                100% COTTON
                                TRUE TO SIZE
                                SCREEN PRINTED
                            </div>
                    </div>
                    <div class="infoBox" style="border-bottom: 1px solid black;">
                        <div style="display: flex; align-items: center;"><span class="plus-minus-btn">+</span><span>Size guide</span></div>
                        <div class="contentBox">
                            size guide
                        </div>
                    
                    </div>
                </div>
                <div style="display: flex; justify-content: center; align-items: center; margin: 10px 0px;">
                    <div class="quantity-box">
                        <button class="decrease-btn">-</button>
                        <input type="number" min="1" value="1" class="quantity-input no-arrows" id="quantity-value" readonly>
                        <button class="increase-btn">+</button>
                    </div>

                    <div class="size-selector">
                        <button class="size-option" data-size="M">M</button>
                        <button class="size-option" data-size="L">L</button>
                        <button class="size-option" data-size="XL">XL</button>
                    </div>

                </div>
                <div id="addToCart">
                    add to cart
                </div>
            </div>
        </div>
    </div>
    <div class="footer-box" style="width: 100%;">
        <div style="display: flex; justify-content: center; gap: 20px; border-top: 1px solid #f0f0f0; padding: 30px;">
            <a href="{% url 'lookbook' %}">
                <div>Lookbook</div>
            </a>
            <a href="{% url 'contact' %}">
                <div>Contact</div>
            </a>
        </div>
        <div style="display: flex; justify-content: space-between; color:#9d9d9d; border-top: 1px solid #f0f0f0; padding: 40px 0px; margin: 0px 10px;">
          <div>&copy; GullyBoysClan 2024</div>
            <div><a href="https://www.instagram.com/gullyboysclan/">
                <span><svg width="35px" height="35px" viewBox="0 -0.5 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                        <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                        <g id="SVGRepo_iconCarrier">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M15.5 5H9.5C7.29086 5 5.5 6.79086 5.5 9V15C5.5 17.2091 7.29086 19 9.5 19H15.5C17.7091 19 19.5 17.2091 19.5 15V9C19.5 6.79086 17.7091 5 15.5 5Z"
                                stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            </path>
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M12.5 15C10.8431 15 9.5 13.6569 9.5 12C9.5 10.3431 10.8431 9 12.5 9C14.1569 9 15.5 10.3431 15.5 12C15.5 12.7956 15.1839 13.5587 14.6213 14.1213C14.0587 14.6839 13.2956 15 12.5 15Z"
                                stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            </path>
                            <rect x="15.5" y="9" width="2" height="2" rx="1" transform="rotate(-90 15.5 9)" fill="#000000">
                            </rect>
                            <rect x="16" y="8.5" width="1" height="1" rx="0.5" transform="rotate(-90 16 8.5)" stroke="#000000"
                                stroke-linecap="round"></rect>
                        </g>
                    </svg></span>
            </a>
</div>
        </div>
    </div>
</body>
<script>
    // JavaScript for opening and closing the menu slider
        const menuOverlay = document.getElementById('menu-overlay');
        const menuSlider = document.getElementById('menu-slider');
        const closeMenuButton = document.getElementById('close-menu');

        // Function to open the menu
        function openMenu() {
            menuOverlay.style.display = 'block';
            menuSlider.classList.add('active');
        }

        // Function to close the menu
        function closeMenu() {
            menuSlider.classList.remove('active');
            setTimeout(() => {
                menuOverlay.style.display = 'none';
            }, 300); // Match the transition duration
        }

        // Event listener for closing the menu
        closeMenuButton.addEventListener('click', closeMenu);

        // Event listener for clicking outside the menu slider
        menuOverlay.addEventListener('click', (event) => {
            if (event.target === menuOverlay) {
                closeMenu();
            }
        });

</script>
<script>
    cartItemsContainer = document.getElementById('cart-items')
    totalPriceElement = document.getElementById('total-price')

    function renderCart() {
            // Retrieve the cart from localStorage
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            cartItemsContainer.innerHTML = ''; // Clear the container before rendering

            // If the cart is empty, display a message
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p style="text-align:center;">Your cart is empty.</p>';
                totalPriceElement.textContent = 'Total: GHS 0.00';
                document.getElementById('cart-footer').style.display = 'none'
                return;

            }
            document.getElementById('cart-footer').style.display = 'block'
            let totalPrice = 0;
            // Loop through each item in the cart
            cart.forEach((item, index) => {
                const { name, size, quantity, price, image } = item;
                const itemTotal = price * quantity;
                totalPrice += itemTotal;

                // Create a cart item element
                const cartItem = document.createElement('div');
                cartItem.classList.add('cart-item');
                cartItem.innerHTML = `
            <div class="cart-item-info" style="display: flex; width:100%;">
            <button class="remove-item-btn" data-index="${index}" style="background: none; border: none; cursor: pointer;">
                    <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M7 17L16.9 7.1" stroke="#000" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M7 7L16.9 16.9" stroke="#000" stroke-linecap="round" stroke-linejoin="round"></path>
                    </svg>
                </button>
                <img src="${image}" alt="${name}" class="cart-item-image" style="width:120px; height:90px;">
                <div>
                    <div style="display:flex; align-items:center; gap:5px;">
                     <h4>${name}</h4>
                    <p>x${quantity}</p>
                    </div>          
                    <div>Size: ${size}</div>
                </div>
                
            </div>
            <div style="display:flex; width:100%; justify-content:right;"><p>GHS ${price}</p></div>
          
        `;

                // Append the cart item to the container
                cartItemsContainer.appendChild(cartItem);
            });

            // Update the total price
            totalPriceElement.textContent = `Total: GHS ${totalPrice.toFixed(2)}`;
            
        }
        renderCart();
        function removeCartItem(index) {
                // Retrieve the cart from localStorage
                let cart = JSON.parse(localStorage.getItem('cart')) || [];
                // Remove the item at the given index
                cart.splice(index, 1);
                // Update localStorage with the modified cart
                localStorage.setItem('cart', JSON.stringify(cart));
                // Re-render the cart
                renderCart();
            }
        // Event listener for the remove button
            cartItemsContainer.addEventListener('click', (event) => {
                if (event.target.closest('.remove-item-btn')) {
                    const index = event.target.closest('.remove-item-btn').dataset.index;
                    removeCartItem(index);
                }
            });


</script>
<script>
   
    const addToCart = document.getElementById('addToCart');

    // Onclick event for add to cart button
    addToCart.onclick = () => {
        // Retrieve the cart from localStorage (parse if exists, or use an empty array)
        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        // Get active size
        const activeSize = document.querySelector('.size-option.active');
        const quantityInput = document.querySelector('.quantity-input');
        const productName = document.querySelector('.productName').textContent;
        var productPrice = parseFloat(document.querySelector('#productPrice').textContent.replace('GHS', '').trim());
        const productImage = document.querySelector('.product-image').src;
        // quantity * product Price
        productPrice = Number(quantityInput.value.trim()) * Number(productPrice)
       
        // Check if a size is selected
        if (!activeSize) {
            return alert('Please select a size');
        }

        // Get the selected size and quantity
        const selectedSize = activeSize.dataset.size;
        const quantity = parseInt(quantityInput.value);


        // Create a new cart item
        const cartItem = {
            name: productName,
            size: selectedSize,
            quantity: quantity,
            price: productPrice,
            image: productImage,
        };

        // Check if the item already exists in the cart (same product and size)
        const existingItemIndex = cart.findIndex(
            (item) => item.name === cartItem.name && item.size === cartItem.size
        );

        if (existingItemIndex > -1) {
            // Update the quantity if the item exists
            cart[existingItemIndex].quantity = cartItem.quantity;
        } else {
            // Add the new item to the cart
            cart.push(cartItem);
        }

        // Update localStorage with the new cart data
        localStorage.setItem('cart', JSON.stringify(cart));
        renderCart();
        // Confirm the item was added
        alert('Item added to cart successfully!');
    };

</script>
<script>
    // Get elements
    const cartIcon = document.getElementById('cart-icon');
    const cartOverlay = document.getElementById('cart-overlay');
    const cartMenu = document.getElementById('cart-menu');
    const closeCart = document.getElementById('close-cart');

    // Show Cart Menu
    cartIcon.addEventListener('click', () => {
        cartOverlay.classList.add('show');
        cartMenu.classList.add('show');
        document.body.style.overflow = 'hidden'
        
    });

    // Hide Cart Menu
    closeCart.addEventListener('click', () => {
        cartOverlay.classList.remove('show');
        cartMenu.classList.remove('show');
        document.body.style.overflow = 'auto';

    });

    // Hide Cart Menu when clicking outside of it
    cartOverlay.addEventListener('click', (e) => {
        if (e.target === cartOverlay) {
            cartOverlay.classList.remove('show');
            cartMenu.classList.remove('show');
            document.body.style.overflow = 'auto';
        }
      

    });

</script>
<script>
    infoBoxes = document.querySelectorAll('.infoBox')

    infoBoxes.forEach(box =>{
        box.onclick = () => {
            sign = box.querySelector('.plus-minus-btn')
            if (sign.textContent.trim() == '+'){
                contentBox = box.querySelector('.contentBox')
                contentBox.style.display = 'block'
                sign.textContent = '-'
            }
            else if (sign.textContent.trim() == '-') {
                contentBox = box.querySelector('.contentBox')
                contentBox.style.display = 'none'
                sign.textContent = '+'
            }
        }
    })

</script>
<script>// Get all size options
    const sizeOptions = document.querySelectorAll('.size-option');

    // Add click event listener
    sizeOptions.forEach((option) => {
        option.addEventListener('click', () => {
            // Remove active class from all options
            sizeOptions.forEach((btn) => btn.classList.remove('active'));
            // Add active class to the clicked option
            option.classList.add('active');

        });
    });
</script>
<script>
    // Select elements
        const decreaseBtn = document.querySelector('.decrease-btn');
        const increaseBtn = document.querySelector('.increase-btn');
        const quantityInput = document.querySelector('.quantity-input');

        // Decrease button click event
        decreaseBtn.addEventListener('click', () => {
            let currentValue = parseInt(quantityInput.value) || 1;
            if (currentValue > 1) {
                quantityInput.value = currentValue - 1;
            }
        });

        // Increase button click event
        increaseBtn.addEventListener('click', () => {
            let currentValue = parseInt(quantityInput.value) || 1;
            quantityInput.value = currentValue + 1;
        });

        // Prevent manual input of non-numeric values
        quantityInput.addEventListener('input', () => {
            if (quantityInput.value === '' || parseInt(quantityInput.value) < 1) {
                quantityInput.value = 1;
            }
        });

</script>
</html>